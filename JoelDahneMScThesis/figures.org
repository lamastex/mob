* Set of valid swaps not stable under swaps
** Change of ids for possible swaps
First a figure giving an example for when only the ids of the possible
swaps change. Consider the co-trajectory \(R\) given by \(I =
\{\iota_1, \iota_2, \iota_3}\) and
\begin{align}
  R(\iota_1) &= \{((0, 1), 0), ((1, 1), 1), ((2, 1), 2)\}\\
  R(\iota_2) &= \{((0, 2), 1), ((1, 2), 2), ((2, 2), 3)\}\\
  R(\iota_3) &= \{((1.05, 0), 0), ((1.05, 1), 1), ((1.05, 2), 2), ((1.05, 3), 3)\}\\
\end{align}
It has \(S(R) = \{(\iota_1, \iota_3, 1, 1), (\iota_2, \iota_3, 2,
2)\}\).

After performing the swap given by \((\iota_1, \iota_3, 1, 1)\) we get
the co-trajectory \(R'\) and now have \(S(R') = \{(\iota_1, \iota_3,
1, 1), (\iota_2, \iota_1, 2, 2)\}\). The two co-trajectories are
generated by the following code:
#+BEGIN_SRC octave :results silent
  r1 = [0, 1;
        1, 1;
        2, 1];

  r2 = [0, 2;
        1, 2;
        2, 2];

  r3 = [1.05, 0;
        1.05, 1;
        1.05, 2;
        1.05, 3];

  r1p = [0, 1;
        1.05, 1;
        1.05, 2;
        1.05, 3];

  r2p = [0, 2;
        1, 2;
        2, 2];

  r3p = [1.05, 0;
        1, 1;
        2, 1];

  subplot(1, 2, 1);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off;

  subplot(1, 2, 2);
  hold on;
  plot(r1p(:, 1), r1p(:, 2), 'o-', "linewidth", 3);
  plot(r2p(:, 1), r2p(:, 2), 'o-', "linewidth", 3);
  plot(r3p(:, 1), r3p(:, 2), 'o-', "linewidth", 3);

  axis off;

  print -dpdf -color "-S800,400" figures/swap-ids.pdf;
#+END_SRC
** Invalid becomes valid
Consider the co-trajectory \(R\) given by \(I = \{\iota_1, \iota_2\}\)
and
\begin{align}
  R(\iota_1) &= \{((1.1, 0), 0), ((1.1, 1), 1), ((1, 1), 1.05), ((0, 1), 2)\}\\
  R(\iota_2) &= \{((1.05, 2), 0), ((1.1, 1.1), 1), ((2, 1.1), 2)\}\\
\end{align}
It has \(S(R) = \{(\iota_1, \iota_2, 1, 1), (\iota_1, \iota_2, 1.05,
1)\}\).

After performing the swap given by \((\iota_1, \iota_2, 1, 1)\) we
get the co-trajectory \(R'\) and now have \(S(R') = \{(\iota_1,
\iota_2, 1, 1), (\iota_1, \iota_2, 1, 1.05)\}\). The two co-trajectories
are generated by the following code:
#+BEGIN_SRC octave :results silent
  r1 = [1.1, 0;
        1.1, 1;
        1, 1;
        0, 1];

  r2 = [1.05, 2;
        1.05, 1.1;
        2, 1.1]

  r1p = [1.1, 0;
         1.1, 1;
         2, 1.1];

  r2p = [1.05, 2;
         1.05, 1.1;
         1, 1;
         0, 1];


  subplot(1, 2, 1);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);

  axis off;

  subplot(1, 2, 2);
  hold on;
  plot(r1p(:, 1), r1p(:, 2), 'o-', "linewidth", 3);
  plot(r2p(:, 1), r2p(:, 2), 'o-', "linewidth", 3);

  axis off;

  print -dpdf -color "-S800,400" figures/swap-valid.pdf;
#+END_SRC
* Order of swaps matter
Consider the co-trajectory \(R\) given by \(I = \{\iota_1, \iota_2,
\iota_3\}\) and
\begin{align}
  R(\iota_1) &= \{((0, 0), 0), ((1, 0.95), 1), ((2, 0), 2)\}\\
  R(\iota_2) &= \{((0, 1), 0), ((1, 1.00), 1), ((2, 1), 2)\}\\
  R(\iota_3) &= \{((0, 2), 0), ((1, 1.05), 2), ((2, 2), 2)\}\\
\end{align}
It has \(S(R) = \{s_1, s_2, s_3\} = \{(\iota_1, \iota_2, 1, 1),
(\iota_1, \iota_3, 1, 1), (\iota_2, \iota_3, 1, 1)\}\).

There are six different orders to perform the swaps in, we'll show
that at least two of them are different. First consider the order \(s_1
\to s_2 \to s_3\), it gives the following result:
#+BEGIN_SRC octave :results silent
  ## Original

  r1 = [0, 0;
        1, 0.95;
        2, 0];

  r2 = [0, 1;
        1, 1;
        2, 1];

  r3 = [0, 2;
        1, 1.05;
        2, 2];

  subplot(1, 4, 1);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off;
  ## Perform s_1

  r1 = [0, 0;
        1, 1;
        2, 1];


  r2 = [0, 1;
        1, 0.95;
        2, 0];


  r3 = [0, 2;
        1, 1.05;
        2, 2];

  subplot(1, 4, 2);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off;
  ## Perform s_2

  r1 = [0, 0;
        1, 1;
        2, 1];


  r2 = [0, 1;
        1, 1.05;
        2, 2];


  r3 = [0, 2;
        1, 0.95;
        2, 0];


  subplot(1, 4, 3);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off;
  ## Perform s_3

  r1 = [0, 0;
        1, 1.05;
        2, 2];

  r2 = [0, 1;
        1, 1;
        2, 1];

  r3 = [0, 2;
        1, 0.95;
        2, 0];

  subplot(1, 4, 4);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off
  print -dpdf -color "-S800,400" figures/swap-order-1.pdf;
#+END_SRC

Now consider the order \(s_2 \to s_1 \to s_3\), this gives us:
#+BEGIN_SRC octave :results silent
  ## Original

  r1 = [0, 0;
        1, 0.95;
        2, 0];

  r2 = [0, 1;
        1, 1;
        2, 1];

  r3 = [0, 2;
        1, 1.05;
        2, 2];

  subplot(1, 4, 1);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off;
  ## Perform s_2

  r1 = [0, 0;
        1, 1.05;
        2, 2];

  r2 = [0, 1;
        1, 1;
        2, 1];

  r3 = [0, 2;
        1, 0.95;
        2, 0];


  subplot(1, 4, 2);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off;
  ## Perform s_1

  r1 = [0, 0;
        1, 1.05;
        2, 2];

  r2 = [0, 1;
        1, 0.95;
        2, 0];

  r3 = [0, 2;
        1, 1;
        2, 1];


  subplot(1, 4, 3);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off;
  ## Perform s_3

  r1 = [0, 0;
        1, 1;
        2, 1];

  r2 = [0, 1;
        1, 0.95;
        2, 0];

  r3 = [0, 2;
        1, 1.05;
        2, 2];

  subplot(1, 4, 4);
  hold on;
  plot(r1(:, 1), r1(:, 2), 'o-', "linewidth", 3);
  plot(r2(:, 1), r2(:, 2), 'o-', "linewidth", 3);
  plot(r3(:, 1), r3(:, 2), 'o-', "linewidth", 3);

  axis off
  print -dpdf -color "-S800,400" figures/swap-order-2.pdf;
#+END_SRC
